{"version":3,"sources":["CallMessage.ts"],"names":["InvalidArgumentError","validateCallMessage","message","content","messageType","contentType","contentStr","JSON","stringify"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,oBAAT,QAAqC,+BAArC;AAEA;AACA;AACA;AACA;AACA;;AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,mBAAT,CAA6BC,OAA7B,EAAmD;AACxD,QAAMC,OAAO,GAAGD,OAAO,CAACC,OAAxB;AACA,QAAMC,WAAW,GAAGF,OAAO,CAACE,WAA5B;AAEA,MAAIC,WAAW,GAAGH,OAAO,CAACG,WAA1B;;AAEA,MAAI,OAAOA,WAAP,KAAuB,WAA3B,EAAwC;AACtCA,IAAAA,WAAW,GAAG,kBAAd;AACD;;AAED,MAAI,OAAOA,WAAP,KAAuB,QAA3B,EAAqC;AACnC,UAAM,IAAIL,oBAAJ,CACJ,2DADI,CAAN;AAGD;;AAED,MAAI,OAAOI,WAAP,KAAuB,QAA3B,EAAqC;AACnC,UAAM,IAAIJ,oBAAJ,CAAyB,yCAAzB,CAAN;AACD;;AAED,MAAI,OAAOG,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,KAAK,IAAlD,EAAwD;AACtD,UAAM,IAAIH,oBAAJ,CAAyB,2CAAzB,CAAN;AACD;;AAED,QAAMM,UAAU,GACd,OAAOH,OAAP,KAAmB,QAAnB,GAA8BA,OAA9B,GAAwCI,IAAI,CAACC,SAAL,CAAeL,OAAf,CAD1C;AAGA,SAAO;AAAEA,IAAAA,OAAO,EAAEG,UAAX;AAAuBD,IAAAA,WAAvB;AAAoCD,IAAAA;AAApC,GAAP;AACD","sourcesContent":["/**\n * Copyright Â© 2022 Twilio, Inc. All rights reserved. Licensed under the Twilio\n * license.\n *\n * See LICENSE in the project root for license information.\n */\n\nimport { InvalidArgumentError } from '../error/InvalidArgumentError';\n\n/**\n * The constituent values of a Call Message.\n *\n * @public\n */\nexport interface CallMessage {\n  /**\n   * The content of the message. This value should match the content type\n   * parameter.\n   *\n   * See {@link CallMessage.contentType} for more information.\n   */\n  content: any;\n\n  /**\n   * The content type of the message. This value should accurately describe\n   * the content of the message. The following values are accepted:\n   *\n   * - \"application/json\"\n   *\n   * If no value is defined, then the default value of \"application/json\" will\n   * be used.\n   *\n   * If the `contentType` of the message is \"application/json\", the content\n   * of the message may be a JS object.\n   */\n  contentType?: string;\n\n  /**\n   * The message type. The following values are accepted:\n   *\n   * - \"user-defined-message\"\n   */\n  messageType: string;\n}\n\n/**\n * Parse CallMessage values. Used when constructing a CallMessage from the\n * native layer, or by the Call and CallInvite classes when sending a\n * CallMessage.\n *\n * @param message the CallMessage details.\n *\n * @internal\n */\nexport function validateCallMessage(message: CallMessage) {\n  const content = message.content;\n  const messageType = message.messageType;\n\n  let contentType = message.contentType;\n\n  if (typeof contentType === 'undefined') {\n    contentType = 'application/json';\n  }\n\n  if (typeof contentType !== 'string') {\n    throw new InvalidArgumentError(\n      'If \"contentType\" is present, it must be of type \"string\".'\n    );\n  }\n\n  if (typeof messageType !== 'string') {\n    throw new InvalidArgumentError('\"messageType\" must be of type \"string\".');\n  }\n\n  if (typeof content === 'undefined' || content === null) {\n    throw new InvalidArgumentError('\"content\" must be defined and not \"null\".');\n  }\n\n  const contentStr =\n    typeof content === 'string' ? content : JSON.stringify(content);\n\n  return { content: contentStr, contentType, messageType };\n}\n"]}