<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@twilio/voice-react-native-sdk](./voice-react-native-sdk.md) &gt; [Voice](./voice-react-native-sdk.voice_class.md) &gt; [runPreflight](./voice-react-native-sdk.voice_class.runpreflight_method.md)

## Voice.runPreflight() method

Starts a PreflightTest.

The PreflightTest allows you to anticipate and troubleshoot end users' connectivity and bandwidth issues before or during Twilio Voice calls.

The PreflightTest performs a test call to Twilio and provides a [PreflightTest.Report](./voice-react-native-sdk.preflighttest_namespace.report_interface.md) at the end. The report includes information about the end user's network connection (including jitter, packet loss, and round trip time) and connection settings.

<b>Signature:</b>

```typescript
runPreflight(accessToken: string, options?: PreflightTest.Options): Promise<PreflightTest>;
```

## Parameters

|  Parameter | Type | Description |
|  --- | --- | --- |
|  accessToken | string |  |
|  options | [PreflightTest.Options](./voice-react-native-sdk.preflighttest_namespace.options_interface.md) | <i>(Optional)</i> |

<b>Returns:</b>

Promise&lt;[PreflightTest](./voice-react-native-sdk.preflighttest_class.md)<!-- -->&gt;

A Promise that: - Resolves with a [PreflightTest](./voice-react-native-sdk.preflighttest_class.md) object. - Rejects with a [TwilioErrors](./voice-react-native-sdk.twilioerrors_namespace.md) if unable to perform a [PreflightTest](./voice-react-native-sdk.preflighttest_class.md)<!-- -->.

## Example


```typescript
import {
  AudioCodecType,
  IceTransportPolicy,
  PreflightTest,
  Voice,
} from '@twilio/voice-react-native-sdk';

const voice = new Voice();

const preflightOptions = {
  iceServers: [{
    username: 'foo',
    password: 'bar',
    serverUrl: 'biffbazz',
  }],
  iceTransportPolicy: IceTransportPolicy.All,
  preferredAudioCodecs: [{
    type: AudioCodecType.Opus,
    maxAverageBitrage: 128000,
  }],
};

const token = '...';

const preflightTest = await voice.runPreflight(token, preflightOptions);

preflightTest.on(PreflightTest.Event.Completed, (report) => {
  // handle the completed event and update your application ui to
  // show report results and reveal any potential issues
});

preflightTest.on(PreflightTest.Event.Connected, () => {
  // handle the connected event and update your application ui to
  // show that the preflight test has started
});

preflightTest.on(PreflightTest.Event.Failed, (error) => {
  // handle the failed event and update your application ui to
  // show the error
});

preflightTest.on(PreflightTest.Event.QualityWarning, (currentWarnings, previousWarnings) => {
  // handle the quality warning event and update your application ui
  // show the warning or the warning cleared
});

preflightTest.on(PreflightTest.Event.Sample, (sample) => {
  // handle the sample event and update your application ui
  // show the progress
});
```

